---

---

<div
  id="accessibility-menu"
  class="flex flex-col items-end gap-4 border border-b-current border-l-transparent border-r-transparent border-t-transparent pt-0 sm:absolute sm:-right-0 sm:-top-1 sm:items-center sm:rounded-md sm:border-none sm:bg-text-like sm:px-2 sm:text-bg-like"
>
  <button
    id="accessibility-regular-font"
    type="button"
    class="z-40 grid aspect-square w-fit justify-center transition duration-150 ease-in-out hover:text-teal-900 focus-visible:text-teal-900 focus-visible:outline-none focus-visible:ring-0 active:text-teal-900 dark:hover:text-pink-900 dark:focus-visible:text-pink-900 dark:active:text-pink-900"
    aria-label="Select Regular Font"
    ><span class="sr-only">Select Regular Font</span>
    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 15 15" class="opacity-50"
      ><path
        fill="currentColor"
        d="M11.205 2.244a.75.75 0 0 0-1.41 0l-3.342 9.192l-1.76-4.224a.75.75 0 0 0-1.385 0l-2.5 6a.75.75 0 0 0 1.384.577L2.73 12.5h2.542l.536 1.286l.005.013a.747.747 0 0 0 .987.389a.75.75 0 0 0 .407-.434L8.389 10.5h4.222l1.184 3.256a.75.75 0 1 0 1.41-.512zm-.705 2.45L12.066 9H8.935zM4.646 11H3.354L4 9.45z"
      ></path></svg
    >
  </button>

  <button
    id="accessibility-large-font"
    type="button"
    class="z-40 grid aspect-square w-fit justify-center transition duration-150 ease-in-out hover:text-teal-900 focus-visible:text-teal-900 focus-visible:outline-none focus-visible:ring-0 active:text-teal-900 dark:hover:text-pink-900 dark:focus-visible:text-pink-900 dark:active:text-pink-900"
    aria-label="Select Large Font"
    ><span class="sr-only">Select Large Font</span>
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 16 16"
      ><path
        fill="currentColor"
        d="M11.205 2.244a.75.75 0 0 0-1.41 0l-3.342 9.192l-1.76-4.224a.75.75 0 0 0-1.385 0l-2.5 6a.75.75 0 0 0 1.384.577L2.73 12.5h2.542l.536 1.286l.005.013a.747.747 0 0 0 .987.389a.75.75 0 0 0 .407-.434L8.389 10.5h4.222l1.184 3.256a.75.75 0 1 0 1.41-.512zm-.705 2.45L12.066 9H8.935zM4.646 11H3.354L4 9.45z"
      ></path></svg
    >
  </button>

  <button
    id="accessibility-extra-large-font"
    type="button"
    class="z-40 grid aspect-square w-fit justify-center transition duration-150 ease-in-out hover:text-teal-900 focus-visible:text-teal-900 focus-visible:outline-none focus-visible:ring-0 active:text-teal-900 dark:hover:text-pink-900 dark:focus-visible:text-pink-900 dark:active:text-pink-900"
    aria-label="Select Extra Large Font"
    ><span class="sr-only">Select Extra Large Font</span>
    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 16 16"
      ><path
        fill="currentColor"
        d="M11.205 2.244a.75.75 0 0 0-1.41 0l-3.342 9.192l-1.76-4.224a.75.75 0 0 0-1.385 0l-2.5 6a.75.75 0 0 0 1.384.577L2.73 12.5h2.542l.536 1.286l.005.013a.747.747 0 0 0 .987.389a.75.75 0 0 0 .407-.434L8.389 10.5h4.222l1.184 3.256a.75.75 0 1 0 1.41-.512zm-.705 2.45L12.066 9H8.935zM4.646 11H3.354L4 9.45z"
      ></path></svg
    >
  </button>

  <button
    id="accessibility-high-contrast"
    type="button"
    class="z-40 grid aspect-square w-fit justify-end transition duration-150 ease-in-out hover:text-teal-900 focus-visible:text-teal-900 focus-visible:outline-none focus-visible:ring-0 active:text-teal-900 dark:hover:text-pink-900 dark:focus-visible:text-pink-900 dark:active:text-pink-900"
    aria-label="Select High Contrast"
  >
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
      ><path
        fill="currentColor"
        d="m20.475 23.3l-2.95-2.95q-1.2.8-2.587 1.225T12 22q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12q0-1.55.425-2.937T3.65 6.475L.675 3.5L2.1 2.075l19.8 19.8zM12 20q1.125 0 2.138-.3t1.912-.825L12 14.825zm8.375-2.5L18.9 16.025q.525-.875.813-1.888T20 12q0-3.325-2.337-5.663T12 4v5.125l-5.5-5.5q1.2-.775 2.588-1.2T12 2q2.075 0 3.9.788t3.175 2.137T21.213 8.1T22 12q0 1.525-.425 2.913t-1.2 2.587"
      ></path></svg
    >
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
      ><path
        fill="currentColor"
        d="M12 22q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22m1-2.075q2.975-.375 4.988-2.613T20 12t-2.013-5.312T13 4.075z"
      ></path></svg
    >
  </button>
</div>
<style>
  #accessibility-menu {
    --from: 0 0 0 100%;
    --offset: 1rem;
    interpolate-size: allow-keywords;
    transition-behavior: allow-discrete;
    opacity: 0;
    height: 0px;
    overflow-y: clip;
  }

  #accessibility-menu.menu-visible {
    padding-top: 1rem;
    animation: animate-menu-in 150ms ease-in-out forwards;
  }

  @keyframes animate-menu-in {
    0% {
      clip-path: inset(var(--from));
      padding-bottom: 0;
      opacity: 0;
      height: 0;
    }
    95% {
      clip-path: inset(0);
      padding-bottom: var(--offset);
      opacity: 0;
      height: auto;
    }
    100% {
      clip-path: inset(0);
      padding-bottom: var(--offset);
      opacity: 1;
      height: auto;
    }
  }

  @media (width > 639px) {
    #accessibility-menu {
      padding-top: 2.5rem;
      --from: 0 100% 0 0;
      --offset: 0.75rem;
    }
    #accessibility-menu.menu-visible {
      padding-top: 3rem;
      animation: animate-menu-in 150ms ease-in-out forwards;
      button:first-of-type::before {
        content: "";
        position: absolute;
        top: 2rem;
        left: 0;
        width: 100%;
        border-top: 1px solid rgb(var(--color-bg-main) / 0.5);
      }
    }
  }

  #accessibility-high-contrast svg:first-of-type {
    display: none;
  }

  :root.amoled {
    #accessibility-high-contrast svg:first-of-type {
      display: block;
    }

    #accessibility-high-contrast svg:last-of-type {
      display: none;
    }
  }
</style>
<script>
  document.addEventListener("astro:page-load", () => {
    // get DOM elements
    const menu = document.querySelector("#accessibility-menu");
    const menuBtn = document.querySelector("#accessibility-settings-toggle");
    const amoledBtn = document.querySelector("#accessibility-high-contrast");
    const regFontBtn = document.querySelector("#accessibility-regular-font");
    const lgFontBtn = document.querySelector("#accessibility-large-font");
    const xlFontBtn = document.querySelector("#accessibility-extra-large-font");

    //declare helpers
    const setRegFontSize = () => {
      document.documentElement.style.fontSize = "16px";
      regFontBtn?.querySelector("svg")?.classList.toggle("opacity-50");
      lgFontBtn?.querySelector("svg")?.classList.add("opacity-50");
      xlFontBtn?.querySelector("svg")?.classList.add("opacity-50");
      menuBtn?.classList.add("sm:pr-2");
      menuBtn?.classList.remove("sm:pr-[0.3rem]");
      menuBtn?.classList.remove("sm:pr-1");
      localStorage.setItem("fontSize", "reg");
    };

    const setLgFontSize = () => {
      document.documentElement.style.fontSize = "20px";
      regFontBtn?.querySelector("svg")?.classList.remove("opacity-1");
      regFontBtn?.querySelector("svg")?.classList.add("opacity-50");
      lgFontBtn?.querySelector("svg")?.classList.remove("opacity-50");
      lgFontBtn?.querySelector("svg")?.classList.add("opacity-1");
      xlFontBtn?.querySelector("svg")?.classList.add("opacity-50");
      xlFontBtn?.querySelector("svg")?.classList.remove("opacity-1");
      menuBtn?.classList.remove("sm:pr-2");
      menuBtn?.classList.remove("sm:pr-1");
      menuBtn?.classList.add("sm:pr-[0.3rem]");
      localStorage.setItem("fontSize", "lg");
    };

    const setXlFontSize = () => {
      document.documentElement.style.fontSize = "24px";
      regFontBtn?.querySelector("svg")?.classList.remove("opacity-1");
      regFontBtn?.querySelector("svg")?.classList.add("opacity-50");
      lgFontBtn?.querySelector("svg")?.classList.add("opacity-50");
      lgFontBtn?.querySelector("svg")?.classList.remove("opacity-1");
      xlFontBtn?.querySelector("svg")?.classList.remove("opacity-50");
      xlFontBtn?.querySelector("svg")?.classList.add("opacity-1");
      menuBtn?.classList.remove("sm:pr-2");
      menuBtn?.classList.remove("sm:pr-[0.3rem]");
      menuBtn?.classList.add("sm:pr-1");
      localStorage.setItem("fontSize", "xl");
    };

    const setContrast = (value: string) => {
      value === "true" ? document.documentElement.classList.add("amoled") : document.documentElement.classList.remove("amoled");
      value === "true" ? localStorage.setItem("amoled", "true") : localStorage.setItem("amoled", "false");
    };

    const hideMenuOnClickOut = (m: HTMLElement, e: Event) => {
      if (!m.contains(e.target)) {
        menu.classList.remove("menu-visible");
        menuBtn?.classList.remove("text-bg-like");
        menuBtn?.classList.remove("menu-visible");
      }
    };

    // grab initial presets
    const amoled = (() => {
      if (typeof localStorage !== "undefined" && localStorage.getItem("amoled")) {
        return localStorage.getItem("amoled") || "false";
      }
      return "true";
    })();

    const fontSize = (() => {
      if (typeof localStorage !== "undefined" && localStorage.getItem("fontSize")) {
        return localStorage.getItem("fontSize") || "reg";
      }
      return "reg";
    })();

    // decide settings on page load from potentially saved values
    amoled === "true" ? setContrast("true") : setContrast("false");

    if (fontSize === "lg") {
      setLgFontSize();
    } else if (fontSize === "xl") {
      setXlFontSize();
    }

    // listeners
    amoledBtn?.addEventListener("click", () => {
      const current = (() => {
        if (typeof localStorage !== "undefined" && localStorage.getItem("amoled")) {
          return localStorage.getItem("amoled") || "false";
        }
        return "true";
      })();
      current === "true" ? setContrast("false") : setContrast("true");
    });

    regFontBtn?.addEventListener("click", setRegFontSize);

    lgFontBtn?.addEventListener("click", setLgFontSize);

    xlFontBtn?.addEventListener("click", setXlFontSize);

    document.addEventListener("click", (event) => {
      if (menuBtn.contains(event.target)) return;
      menu?.classList.contains("menu-visible") ? hideMenuOnClickOut(menu, event) : null;
    });
  });
</script>
